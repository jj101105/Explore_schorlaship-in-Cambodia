<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Scholarships | Scholarship Platform</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f2f5;
        }
        .header-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #3b82f6;
            letter-spacing: -1px;
        }
        .nav-link {
            color: #4b5563;
            font-weight: 500;
            margin-left: 1.5rem;
            transition: color 0.2s;
        }
        .nav-link:hover, .nav-link:focus {
            color: #2563eb;
            outline: none;
        }
        .search-bar input {
            border-radius: 1.5rem;
            padding-left: 2.5rem;
        }
        .search-bar i {
            left: 1rem;
        }
        .filter-btn.active, .filter-btn:focus {
            background: #2563eb;
            color: #fff;
            outline: none;
        }
        .scholarship-card {
            transition: box-shadow 0.2s, transform 0.2s;
            cursor: pointer; /* Indicate clickability */
        }
        .scholarship-card:hover, .scholarship-card:focus-within {
            box-shadow: 0 8px 24px rgba(59,130,246,0.13);
            transform: translateY(-4px) scale(1.01);
            outline: none;
        }
        .footer-links a {
            color: #93c5fd;
            margin: 0 0.75rem;
            text-decoration: none;
            transition: color 0.2s;
        }
        .footer-links a:hover, .footer-links a:focus {
            color: #60a5fa;
            outline: none;
        }
        .social-icons a {
            color: #d1d5db;
            font-size: 1.5rem;
            margin: 0 0.75rem;
            transition: color 0.2s;
        }
        .social-icons a:hover, .social-icons a:focus {
            color: #fff;
            outline: none;
        }
        @media (max-width: 900px) {
            .scholarship-card {
                min-height: 0;
            }
        }
        /* Custom scrollbar for main content area */
        .scrollable-content::-webkit-scrollbar {
            width: 8px;
        }
        .scrollable-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .scrollable-content::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .scrollable-content::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Modal specific styles */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.75);
        }
        .modal-content {
            animation: fadeInScale 0.3s ease-out forwards;
        }
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .detail-section {
            padding: 1.5rem; /* Default padding */
            margin-bottom: 1rem; /* Default margin */
        }
        @media (min-width: 768px) { /* Adjust padding for larger screens */
            .detail-section {
                padding: 2rem;
            }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header Section -->
    <header class="bg-white p-4 shadow-sm sticky top-0 z-50">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="header-logo">Scholarship Events</div>
            </div>
            <nav class="flex items-center">
                <a href="../index.html" class="nav-link">Home</a>
                <a href="all-scholarship.html" class="nav-link">Scholarships</a>
                <a href="university-list.html" class="nav-link">Universities</a>
                <a href="recmm.html" class="nav-link">Quizzes</a>
                <a href="user-dashboard.html" class="nav-link" aria-label="User"><i class="fas fa-user-circle"></i></a>
            </nav>
        </div>
        <!-- Search Bar -->
        <div class="container mx-auto mt-4 px-4">
            <form class="relative search-bar" onsubmit="event.preventDefault(); doScholarshipSearch();">
                <input id="scholarshipSearchInput" type="text" placeholder="Search Scholarships..." class="w-full pl-10 pr-4 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm" aria-label="Search Scholarships">
                <i class="fas fa-search absolute left-6 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                <button type="submit" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-600 text-white px-3 py-1 rounded-full hover:bg-blue-700 transition-colors" aria-label="Search">
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>
        </div>
        <!-- Filter Buttons -->
        <div class="container mx-auto mt-4 overflow-x-auto whitespace-nowrap scrollbar-hide">
            <div id="filterButtons" class="inline-flex space-x-3 pb-2 px-4">
                <button class="filter-btn bg-blue-600 text-white px-5 py-2 rounded-full shadow-md hover:bg-blue-700 transition-colors text-sm active" data-filter="All" tabindex="0">All</button>
                <button class="filter-btn bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors text-sm" data-filter="Bachelor" tabindex="0">Bachelor</button>
                <button class="filter-btn bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors text-sm" data-filter="Master" tabindex="0">Master</button>
                <button class="filter-btn bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors text-sm" data-filter="Fully Funded" tabindex="0">Fully Funded</button>
                <button class="filter-btn bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors text-sm" data-filter="Partially Funded" tabindex="0">Partially Funded</button>
                <button class="filter-btn bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors text-sm" data-filter="STEM" tabindex="0">STEM</button>
                <button class="filter-btn bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors text-sm" data-filter="Humanities" tabindex="0">Humanities</button>
                <button class="filter-btn bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 shadow-sm hover:bg-gray-100 transition-colors text-sm" data-filter="Business" tabindex="0">Business</button>
            </div>
        </div>
    </header>

    <!-- Main Content Section -->
    <main class="flex-grow container mx-auto p-4 pt-0 overflow-y-auto scrollable-content">
        
        
        <!-- Scholarship List View -->
<div id="scholarshipListView">
  <div id="scholarshipCardsGrid" class="grid grid-cols-3 gap-4"></div>
</div>

<!-- Scholarship Detail View -->
<div id="scholarshipDetailView" class="hidden container mx-auto p-4 pt-0">
    <div class="mb-4">
        <a id="backToScholarshipsBtn" href="#" class="flex items-center text-gray-600 hover:text-blue-600 transition-colors text-sm">
            <i class="fas fa-arrow-left mr-2"></i>Back to Scholarships
        </a>
    </div>

    <div class="bg-white rounded-xl shadow-md p-6 mb-4 flex flex-col md:flex-row justify-between items-start md:items-center">
        <div class="flex items-start mb-4 md:mb-0">
            <img id="detailScholarshipLogo" src="default_logo.png" alt="Scholarship Logo" class="w-16 h-16 rounded-full mr-4">
            <div>
                <h2 id="detailScholarshipTitle" class="text-2xl font-bold text-gray-900"></h2>
                <p id="detailScholarshipSubtitle" class="text-gray-600"></p>
            </div>
        </div>
        <div class="flex space-x-4 text-gray-500 text-sm">
            <button class="flex items-center hover:text-blue-600 transition-colors"><i class="far fa-heart mr-2"></i>Favorite</button>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-md p-6 mb-4 grid grid-cols-1 md:grid-cols-2 gap-y-4 text-sm">
        <p><i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>Study in: <span id="detailStudyIn" class="font-medium">Cambodia</span></p>
        <p><i class="fas fa-tag text-blue-500 mr-2"></i>Type: <span id="detailType" class="font-medium">Fully Funded</span></p>
        <p><i class="fas fa-graduation-cap text-blue-500 mr-2"></i>Degree: <span id="detailDegree" class="font-medium">Bachelor</span></p>
        <p><i class="fas fa-calendar-alt text-blue-500 mr-2"></i>Deadline: <span id="detailDeadline" class="font-medium">15-Oct-2025</span></p>
    </div>

    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">Scholarship Description</h3>
        <p id="detailDescription" class="text-gray-700 leading-relaxed"></p>
    </div>

    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">Scholarship Benefits</h3>
        <ul id="detailBenefits" class="list-disc list-inside space-y-1 text-gray-700"></ul>
    </div>
    
    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">University</h3>
        <p id="detailUniversity" class="text-gray-700 leading-relaxed"></p>
    <h3 class="font-bold text-xl mb-3 text-gray-800">Major</h3>
    <p id="detailMajor" class="text-gray-700 leading-relaxed"></p>
</div>
    
    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">Eligibility Requirements</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-y-2 text-gray-700">
            <div>
                <p><strong class="font-semibold text-gray-900">GPA:</strong> <span id="detailGPA"></span></p>
                <p><strong class="font-semibold text-gray-900">Grade:</strong> <span id="detailGrade"></span></p>
                <p><strong class="font-semibold text-gray-900">IELTS:</strong> <span id="detailIELTS"></span></p>
            </div>
            <div>
                <p><strong class="font-semibold text-gray-900">Max Age:</strong> <span id="detailMaxAge"></span></p>
                <p><strong class="font-semibold text-gray-900">Gender:</strong> <span id="detailGender"></span></p>
                <p><strong class="font-semibold text-gray-900">Work Experience:</strong> <span id="detailWorkExperience"></span></p>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">Requirement Details</h3>
        <ul id="detailDetailedRequirements" class="list-disc list-inside space-y-1 text-gray-700">
            </ul>
    </div>
    
    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">Eligible Countries</h3>
        <ul id="detailEligibleCountries" class="list-disc list-inside space-y-1 text-gray-700"></ul>
    </div>
    
    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">Required Document</h3>
        <ul id="detailRequiredDocuments" class="list-disc list-inside space-y-1 text-gray-700"></ul>
    </div>
    
    <div class="bg-white rounded-xl shadow-md p-6 mb-4">
        <h3 class="font-bold text-xl mb-3 text-gray-800">How to Apply</h3>
        <p id="detailHowToApply" class="text-gray-700 leading-relaxed"></p>
    </div>
</div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white p-6 text-center text-sm mt-8">
        <div class="flex flex-col md:flex-row justify-between items-center max-w-5xl mx-auto">
            <div class="footer-links mb-2">
                <a href="#">Terms of Use</a> |
                <a href="#">Privacy Policy</a> |
                <a href="#">Return Policy</a>
            </div>
            <div class="social-icons mb-2">
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
        <p class="mt-2">&copy; 2025 Scholarship Platform. All rights reserved.</p>
    </footer>

    <script>
  // Global scholarships array
  let scholarshipsData = [];

  // Get references to main view elements
  const scholarshipListView = document.getElementById('scholarshipListView');
  const scholarshipDetailView = document.getElementById('scholarshipDetailView');
  const scholarshipCardsGrid = document.getElementById('scholarshipCardsGrid');
  const backToScholarshipsBtn = document.getElementById('backToScholarshipsBtn');

  // Get references to detail view elements
  const detailScholarshipLogo = document.getElementById('detailScholarshipLogo');
  const detailScholarshipTitle = document.getElementById('detailScholarshipTitle');
  const detailScholarshipSubtitle = document.getElementById('detailScholarshipSubtitle');
  const detailStudyIn = document.getElementById('detailStudyIn');
  const detailType = document.getElementById('detailType');
  const detailDegree = document.getElementById('detailDegree');
  const detailDeadline = document.getElementById('detailDeadline');
  const detailDescription = document.getElementById('detailDescription');
  const detailBenefits = document.getElementById('detailBenefits');
  const detailUniversity = document.getElementById('detailUniversity');
  const detailMajor = document.getElementById('detailMajor');
  const detailGPA = document.getElementById('detailGPA');
  const detailMaxAge = document.getElementById('detailMaxAge');
  const detailGrade = document.getElementById('detailGrade');
  const detailGender = document.getElementById('detailGender');
  const detailIELTS = document.getElementById('detailIELTS');
  const detailWorkExperience = document.getElementById('detailWorkExperience');
  const detailDetailedRequirements = document.getElementById('detailDetailedRequirements');
  const detailEligibleCountries = document.getElementById('detailEligibleCountries');
  const detailRequiredDocuments = document.getElementById('detailRequiredDocuments');
  const detailHowToApply = document.getElementById('detailHowToApply');

  // Load all scholarships from backend on page load
  function loadScholarships() {
    fetch('../php/get_scholarships.php') // Adjust the URL as needed
      .then(response => response.json())
      .then(data => {
        scholarshipsData = data;
        renderScholarshipCards();
      })
      .catch(error => {
        console.error('Error fetching scholarships:', error);
        scholarshipCardsGrid.innerHTML = '<p class="text-center text-red-500">Failed to load scholarships.</p>';
      });
  }

  // Render scholarship cards
  function renderScholarshipCards(filteredScholarships = scholarshipsData) {
    scholarshipCardsGrid.innerHTML = ''; // Clear previous cards
    if (filteredScholarships.length === 0) {
      scholarshipCardsGrid.innerHTML = '<p class="text-center text-gray-600 col-span-full">No scholarships found matching your criteria.</p>';
      return;
    }

    filteredScholarships.forEach(scholarship => {
      const cardHtml = `
        <div class="scholarship-card bg-white rounded-xl shadow-md p-5 relative cursor-pointer" tabindex="0" data-id="${scholarship.id}">
          <span class="absolute top-3 right-3 text-gray-500 text-sm">${scholarship.favorites}</span>
          <div class="flex items-start mb-4">
          <img src="${scholarship.logo}" alt="Scholarship Logo"
     class="rounded-full mr-3 shadow-sm w-10 h-10"
     onerror="this.onerror=null;this.src='https://ui-avatars.com/api/?name=Scholarship';">            <div>
              <h3 class="font-semibold text-gray-900 text-lg">${scholarship.title}</h3>
              <p class="text-gray-600 text-sm">${scholarship.subtitle}</p>
            </div>
          </div>
          <div class="grid grid-cols-1 gap-2 text-gray-700 text-sm mb-4">
            <p><i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>Study in: <span class="font-medium">${scholarship.details.studyIn}</span></p>
            <p><i class="fas fa-tag text-blue-500 mr-2"></i>Type: <span class="font-medium">${scholarship.details.type}</span></p>
            <p><i class="fas fa-graduation-cap text-blue-500 mr-2"></i>Degree: <span class="font-medium">${scholarship.details.degree}</span></p>
            <p><i class="fas fa-calendar-alt text-blue-500 mr-2"></i>Deadline: <span class="font-medium">${scholarship.details.deadline}</span></p>
          </div>
          <p class="text-gray-500 text-xs mb-4">${scholarship.favorites} Favorites</p>
          <div class="flex justify-around border-t border-gray-200 pt-4">
            <button class="flex items-center text-gray-600 hover:text-blue-600 transition-colors text-sm" aria-label="Favorite">
              <i class="far fa-heart mr-2"></i>Favorite
            </button>
          </div>
        </div>
      `;
      scholarshipCardsGrid.insertAdjacentHTML('beforeend', cardHtml);
    });

    // Attach click listeners to each card
    document.querySelectorAll('.scholarship-card').forEach(card => {
      card.addEventListener('click', () => {
        const scholarshipId = card.dataset.id;
        renderScholarshipDetails(scholarshipId);
      });
    });
  }

  // Render scholarship details view
 function renderScholarshipDetails(id) {
    const scholarship = scholarshipsData.find(s => s.id == id);
    if (!scholarship) {
        alert('Scholarship details not found.');
        return;
    }
    detailScholarshipLogo.src = scholarship.logo;
    // ...set other fields as before...
    scholarshipListView.classList.add('hidden');
    scholarshipDetailView.classList.remove('hidden');
    window.scrollTo({ top: 0, behavior: 'smooth' });

    // Fill detail fields
    detailScholarshipLogo.src = scholarship.logo;
    detailScholarshipTitle.textContent = scholarship.title;
    detailScholarshipSubtitle.textContent = scholarship.subtitle;
    detailStudyIn.textContent = scholarship.details.studyIn;
    detailType.textContent = scholarship.details.type;
    detailDegree.textContent = scholarship.details.degree;
    detailDeadline.textContent = scholarship.details.deadline;
    detailDescription.textContent = scholarship.description;

    // Assuming these fields are arrays; adjust if backend differs
    detailBenefits.innerHTML = scholarship.benefits.map(item => `<li>${item}</li>`).join('');
    detailUniversity.textContent = scholarship.university;
    detailMajor.textContent = scholarship.major;
    detailGPA.textContent = scholarship.eligibility.gpa;
    detailMaxAge.textContent = scholarship.eligibility.maxAge;
    detailGrade.textContent = scholarship.eligibility.grade;
    detailGender.textContent = scholarship.eligibility.gender;
    detailIELTS.textContent = scholarship.eligibility.ielts;
    detailWorkExperience.textContent = scholarship.eligibility.workExperience;
    detailDetailedRequirements.innerHTML = scholarship.eligibility.detailedRequirements.map(item => `<li>${item}</li>`).join('');
    detailEligibleCountries.innerHTML = scholarship.eligibleCountries.map(item => `<li>${item}</li>`).join('');
    detailRequiredDocuments.innerHTML = scholarship.requiredDocuments.map(item => `<li>${item}</li>`).join('');
    detailHowToApply.textContent = scholarship.howToApply;

    // Show detail view, hide list view
    scholarshipListView.classList.add('hidden');
    scholarshipDetailView.classList.remove('hidden');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Back button to list
  backToScholarshipsBtn.addEventListener('click', () => {
    scholarshipDetailView.classList.add('hidden');
    scholarshipListView.classList.remove('hidden');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Scholarship search function
  function doScholarshipSearch() {
    const input = document.getElementById('scholarshipSearchInput');
    const query = input.value.toLowerCase().trim();
    const filtered = scholarshipsData.filter(scholarship =>
      scholarship.title.toLowerCase().includes(query) ||
      scholarship.subtitle.toLowerCase().includes(query) ||
      scholarship.description.toLowerCase().includes(query) ||
      scholarship.details.studyIn.toLowerCase().includes(query) ||
      scholarship.tags.some(tag => tag.toLowerCase().includes(query))
    );
    renderScholarshipCards(filtered);
  }

  // Filter buttons logic
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', function () {
      // Reset all buttons
      document.querySelectorAll('.filter-btn').forEach(b => {
        b.classList.remove('active', 'bg-blue-600', 'text-white');
        b.classList.add('bg-white', 'text-gray-700');
      });

      // Set current button active
      this.classList.add('active', 'bg-blue-600', 'text-white');
      this.classList.remove('bg-white', 'text-gray-700');

      const filterType = this.dataset.filter;
      let filteredScholarships = [];

      if (filterType === 'All') {
        filteredScholarships = scholarshipsData;
      } else {
        filteredScholarships = scholarshipsData.filter(scholarship =>
          scholarship.tags.includes(filterType) ||
          scholarship.details.type.includes(filterType) ||
          scholarship.details.degree.includes(filterType)
        );
      }
      renderScholarshipCards(filteredScholarships);
    });
  });

  // Run on page load
  document.addEventListener('DOMContentLoaded', loadScholarships);
</script>

</body>
</html>
